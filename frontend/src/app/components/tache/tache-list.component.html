<div class="box">
    <div class="field has-addons has-addons-centered is-hidden-desktop">
        <div class="control has-icons-left has-icons-right">
            <label>
                <input type="text" class="input" placeholder="Rechercher..." />
            </label>
            <span class="icon is-left is-ghost">
                <i class="fas fa-magnifying-glass"></i>
            </span>
            <span class="icon is-right is-clickable is-ghost reset">
                <i class="fas fa-delete-left"></i>
            </span>
        </div>
    </div>
    <div class="is-flex is-justify-content-space-between">
        <h3 class="subtitle has-text-weight-bold">
            Tache
        </h3>
        <div class="field is-grouped">
          @if (role === 'manager') {
            <div class="field">
              <div class="control">
                <button class="button" (click)="goToTacheCreate()">
                  <span class="icon is-clickable add" >
                      <i class="fas fa-add"></i>
                  </span>
                </button>
              </div>
            </div>
          }
        </div>
    </div>
    <div class="table-container">
        <table class="table is-fullwidth">
            <thead>
                <tr>
                    <th class="has-text-left">Idfacture</th>
                    <th class="has-text-left">Role</th>
                    <th class="has-text-left">Employe</th>
                    <th class="has-text-left">Statut</th>
                    <th class="has-text-left">Heure</th>
                    @if (role === 'mecanicien') {
                      <td>
                      </td>
                    }
                </tr>
            </thead>
            <tbody>
                @for (tache of taches; track tache._id) {
                <tr>
                    <td>{{ tache.idfacture }}</td>
                    <td>{{ tache.idrole.nom }}</td>
                    <td>{{ tache.idemploye.nom }}</td>
                    <td> @if (tache.statut == 1){
                      <span class="tag is-success">Termin√©</span>
                    }
                    @else{
                      <span class="tag is-warning">En cours</span>
                    }
                    </td>
                    <td>{{ tache.heure }}</td>
                  @if (role === 'mecanicien') {
                    <td>
                      <div class="buttons is-pulled-right">
                        <a (click)="updateTache(tache._id)" class="button is-success has-text-white is-hidden-touch">
                          <div class="icon-text">
                                      <span class="icon">
                                          <i class="fa-solid fa-check"></i>
                                      </span>
                            <span>
                                        Terminer
                                    </span>
                          </div>
                        </a>
                        <a (click)="updateTache(tache._id)" class="button is-success has-text-white is-hidden-desktop">
                                <span class="icon">
                                    <i class="fa-solid fa-check"></i>
                                </span>
                        </a>
                      </div>
                    </td>
                  }
                </tr>
                }
            </tbody>
        </table>
    </div>
</div>
